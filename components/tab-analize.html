<section class="tab-panel" id="tab-analize" role="tabpanel">
    <div class="panel-grid">

        <section class="card" id="telemetryCard" data-block-interaction style="font-size: 0.85rem;">
            <h2 style="font-size: 0.7rem; margin-bottom: 0.3rem;">Live Telemetry</h2>
            <div class="metrics-grid">
                <div class="metric-row">
                    <article class="metric">
                        <h3>Voltage</h3>
                        <p id="analizeVoltage">--</p>
                    </article>
                    <article class="metric">
                        <h3>Current</h3>
                        <p id="analizeCurrent">--</p>
                    </article>
                    <article class="metric">
                        <h3>Power</h3>
                        <p id="analizePower">--</p>
                    </article>
                </div>
                <div class="metric-row">
                    <article class="metric">
                        <h3>RPM</h3>
                        <p id="analizeRpm">--</p>
                    </article>
                    <article class="metric">
                        <h3>Thrust</h3>
                        <p id="analizeThrust">--</p>
                    </article>
                </div>
                <div class="metric-row">
                    <article class="metric">
                        <h3>ESC Temp</h3>
                        <p id="analizeEscTemp">--</p>
                    </article>
                    <article class="metric">
                        <h3>Motor Temp</h3>
                        <p id="analizeMotorTemp">--</p>
                    </article>
                </div>
            </div>
        </section>


        <section class="card" id="analizeCard" style="font-size: 0.85rem;">
            <h2 style="font-size: 0.7rem; margin-bottom: 0.3rem;">Analize</h2>

            <div class="inline-field" data-connected-only style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem; font-size: 0.75rem;">
                <span style="min-width: auto;">Mode:</span>
                <select id="analizeModeSelect" disabled style="flex: 1; min-width: 220px; font-size: 0.75rem;">
                    <option value="sweep">Static Throttle Sweep</option>
                    <option value="step">Step Response</option>
                    <option value="endurance">Fixed Throttle Endurance</option>
                    <option value="ir">Battery IR (Current Steps)</option>
                    <option value="kv">KV Estimation</option>
                    <option value="thermal">ESC Thermal Stress</option>
                    <option value="mapping">Prop/Motor Mapping</option>
                    <option value="efficiency">Efficiency Analysis</option>
                </select>
            </div>
            <div class="subtext" id="analizeModeHint" style="margin-top: 0.35rem; font-size: 0.65rem;">Select a mode to configure parameters.</div>

            <!-- Parameters inline below mode -->
            <div id="analize-params-card" class="params-grid" style="margin-top: 0.4rem;"></div>
        </section>

        

        <!-- Buttons card (no title) -->
        <section class="card" style="padding: 0.4rem 0.6rem;">
            <div class="button-row" data-connected-only style="gap: 0.5rem;">
                <button id="analizeStartButton" class="success" disabled style="font-size: 0.75rem; padding: 0.3rem 0.6rem;">Start</button>
                <button id="analizeStopButton" class="neutral" disabled style="font-size: 0.75rem; padding: 0.3rem 0.6rem;">Stop</button>
            </div>
        </section>

        <!-- Status card -->
        <section class="card" style="font-size: 0.85rem; padding: 0.4rem 0.6rem;">
            <h2 style="font-size: 0.7rem; margin-bottom: 0.3rem;">Status</h2>
            <p id="analizeStatus" style="font-size: 0.75rem;">Awaiting connection.</p>
            <div id="analizeProgress" style="display: none; margin-top: 0.5rem;">
                <div class="progress-bar" style="width: 100%; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden;">
                    <div class="progress-fill" id="progressFill" style="height: 100%; background: #149eca; width: 0%; transition: width 0.3s ease;"></div>
                </div>
                <span id="progressText" style="display: block; text-align: center; margin-top: 0.25rem; font-size: 0.65rem; color: #f0f6fc;"></span>
            </div>
        </section>

        <!-- Graphs card -->
        <section class="card" id="graphsCard" style="padding: 0.4rem 0.6rem 0.4rem 0.8rem;">
            <h2 style="position:relative; font-size: 0.7rem; margin-bottom: 0.3rem;">
                Analysis Graphs
                <span style="position:absolute; top:0.5rem; right:0.5rem; display:flex; gap:0.3rem;">
                    <button id="exportDataButton" title="Export CSV" style="background:none;border:none;padding:0.2rem 0.3rem;font-size:1.1em;cursor:pointer;line-height:1;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                    </button>
                    <button id="fullscreenGraphButton" title="View Fullscreen" style="background:none;border:none;padding:0.2rem 0.3rem;font-size:1.1em;cursor:pointer;line-height:1;">â›¶</button>
                </span>
            </h2>
            <div id="analyzeChartContainer" style="position:relative; padding-left: 0.5rem;">
                <canvas id="analyzeChart" width="400" height="200"></canvas>
            </div>
        </section>

        <!-- Mode Description card -->
        <section class="card" id="modeDescriptionCard" style="font-size: 0.85rem;">
            <h2 style="font-size: 0.7rem; margin-bottom: 0.3rem;">Mode Description</h2>
            <div style="margin-bottom: 0.5rem;">
                <select id="descriptionModeSelect" style="font-size: 0.75rem;">
                    <option value="">Select a Mode</option>
                    <option value="sweep">Static Throttle Sweep</option>
                    <option value="step">Step Response</option>
                    <option value="endurance">Fixed Throttle Endurance</option>
                    <option value="ir">Battery IR (Current Steps)</option>
                    <option value="kv">KV Estimation</option>
                    <option value="thermal">ESC Thermal Stress</option>
                    <option value="mapping">Prop/Motor Mapping</option>
                    <option value="efficiency">Efficiency Analysis</option>
                </select>
            </div>
            <div id="modeDescriptionContent">
                <h3>Select a Mode</h3>
                <p>Choose an analysis mode from the dropdown above to see detailed information about what it does and how to interpret the results.</p>
            </div>
        </section>

    </div>
</section>
